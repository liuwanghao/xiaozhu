<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <!-- <title>2026å¹´ç­åˆ¶æ—¥å†</title> -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      /* å¼ºåˆ¶è¾¹æ¡†è®¡å…¥å°ºå¯¸ï¼Œæ ¸å¿ƒä¿®å¤ */
      font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
    }

    body {
      background-color: #f5f5f5;
      padding: 8px;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      margin: 0 auto;
    }

    .today-shift {
      background-color: #fff;
      border-radius: 8px;
      padding: 10px 8px;
      margin-bottom: 12px;
      text-align: center;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      width: 100%;
    }

    .today-shift h2 {
      font-size: 17px;
      color: #333;
      margin-bottom: 4px;
    }

    .today-shift .shift-value {
      font-size: 19px;
      font-weight: bold;
    }

    .header {
      text-align: center;
      padding: 12px 0;
      color: #333;
      width: 100%;
    }

    .header h1 {
      font-size: 22px;
      margin-bottom: 4px;
    }

    .header .desc {
      font-size: 14px;
      color: #666;
      line-height: 1.4;
    }

    .month-switch {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
      background-color: #fff;
      padding: 8px 12px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      width: 100%;
    }

    .switch-btn {
      background-color: #f8f8f8;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      font-size: 16px;
      color: #666;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: manipulation;
    }

    .switch-btn:active {
      background-color: #eee;
    }

    .current-month-text {
      font-size: 17px;
      font-weight: bold;
      color: #333;
    }

    .month-card {
      background-color: #fff;
      border-radius: 8px;
      padding: 10px 8px;
      margin-bottom: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      width: 100%;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      width: 100%;
    }

    .week-header {
      text-align: center;
      font-size: 12px;
      color: #999;
      padding: 8px 0;
      background-color: #f8f8f8;
      border-radius: 4px;
      font-weight: bold;
      white-space: nowrap;
    }

    /* æ ¸å¿ƒä¿®å¤ï¼šæ‰€æœ‰å•å…ƒæ ¼é»˜è®¤2pxé€æ˜è¾¹æ¡†ï¼Œé¢„ç•™ç©ºé—´ */
    .day-cell {
      aspect-ratio: 1/1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      padding: 0px;
      /* é€‚é…è¾¹æ¡†é¢„ç•™ç©ºé—´ï¼Œå‡å°‘å†…è¾¹è· */
      position: relative;
      width: 100%;
      border: 2px solid transparent;
      /* é¢„ç•™è¾¹æ¡†ç©ºé—´ï¼Œå…³é”®ï¼ */
    }

    /* ä»Šæ—¥é«˜äº®ï¼šä»…æ›¿æ¢è¾¹æ¡†é¢œè‰²ï¼Œå°ºå¯¸ä¸å˜ï¼Œæ— å˜å½¢ */
    .day-cell.today {
      background-color: #f0f8ff;
      border: 2px solid #4299e1;
      /* ä»…æ”¹é¢œè‰²ï¼Œå°ºå¯¸å’Œå…¶ä»–å•å…ƒæ ¼ä¸€è‡´ */
    }

    .day-cell.empty {
      background-color: #f8f8f8;
      color: transparent;
      border: 2px solid transparent;
      /* ç©ºå•å…ƒæ ¼ä¹Ÿé¢„ç•™è¾¹æ¡† */
    }

    .day-cell .date {
      font-size: 16px;
      font-weight: bold;
      color: #333;
      margin-bottom: 2px;
    }

    .day-cell .shift {
      font-size: 10px;
      padding: 2px 4px;
      border-radius: 3px;
      color: #fff;
      white-space: nowrap;
    }

    .shift-white {
      background-color: #4299e1;
    }

    .shift-night {
      background-color: #718096;
    }

    .shift-rest {
      background-color: #48bb78;
    }

    .footer {
      margin-top: 15px;
      padding: 10px 8px;
      background-color: #fff;
      border-radius: 8px;
      font-size: 13px;
      color: #666;
      line-height: 1.5;
      width: 100%;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="today-shift">
      <h2>å°çŒªä»Šæ—¥ç­åˆ¶æ˜¯ï¼š<span id="today-shift-value" class="shift-value"></span></h2>
    </div>

    <div class="header">
      <!-- <h1>2026å¹´ç­åˆ¶æ—¥å†</h1> -->
      <p class="desc">è½®ç­è§„åˆ™ï¼šå¤œç­â†’ä¼‘æ¯â†’ç™½ç­ï¼ˆ3å¤©å¾ªç¯ï¼‰</p>
      <!-- <p class="desc">åŸºå‡†æ—¥ï¼š2026-02-02 å¤œç­</p> -->
      <p style="font-size:13px; margin-top:3px;">ğŸ”¹ ç™½ç­ï¼š8:00-20:00 | ğŸ”¹ å¤œç­ï¼š20:00-æ¬¡æ—¥8:00 | ğŸ”¹ ä¼‘æ¯ï¼šæ— å·¥ä½œæ—¶é—´</p>
    </div>

    <div class="month-switch">
      <button class="switch-btn" id="prev-month-btn">â†</button>
      <div class="current-month-text" id="current-month-display">2026å¹´äºŒæœˆ</div>
      <button class="switch-btn" id="next-month-btn">â†’</button>
    </div>

    <div id="calendar-container"></div>
  </div>

  <script>
    let currentYear = 2026;
    let currentMonth = new Date().getMonth();
    currentYear = 2026;

    function getShiftInfo(date) {
      const baseDate = new Date(2026, 1, 2);
      const timeDiff = date - baseDate;
      const daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
      const shiftCycle = [
        { name: 'å¤œç­', class: 'shift-night', time: '20:00-æ¬¡æ—¥8:00' },
        { name: 'ä¼‘æ¯', class: 'shift-rest', time: 'æ— å·¥ä½œæ—¶é—´' },
        { name: 'ç™½ç­', class: 'shift-white', time: '8:00-20:00' }
      ];
      const shiftIndex = (daysDiff % 3 + 3) % 3;
      return shiftCycle[shiftIndex];
    }

    function renderTodayShift() {
      const today = new Date();
      today.setFullYear(2026);
      const shiftInfo = getShiftInfo(today);
      const shiftValue = document.getElementById('today-shift-value');
      shiftValue.textContent = shiftInfo.name;
      shiftValue.style.color =
        shiftInfo.class === 'shift-white' ? '#4299e1' :
          shiftInfo.class === 'shift-night' ? '#718096' : '#48bb78';
    }

    function generateMonthCalendar(year, month) {
      const monthNames = ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ'];
      const weekNames = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];
      const today = new Date();
      today.setFullYear(2026);
      const todayDate = today.getDate();
      const todayMonth = today.getMonth();
      const todayYear = today.getFullYear();

      const calendarContainer = document.getElementById('calendar-container');
      calendarContainer.innerHTML = '';

      const monthCard = document.createElement('div');
      monthCard.className = 'month-card';

      const calendarGrid = document.createElement('div');
      calendarGrid.className = 'calendar-grid';

      weekNames.forEach(week => {
        const weekHeader = document.createElement('div');
        weekHeader.className = 'week-header';
        weekHeader.textContent = week;
        calendarGrid.appendChild(weekHeader);
      });

      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const firstDayWeek = (firstDay.getDay() === 0) ? 6 : firstDay.getDay() - 1;

      for (let i = 0; i < firstDayWeek; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.className = 'day-cell empty';
        calendarGrid.appendChild(emptyCell);
      }

      for (let day = 1; day <= lastDay.getDate(); day++) {
        const currentDate = new Date(year, month, day);
        const shiftInfo = getShiftInfo(currentDate);

        const dayCell = document.createElement('div');
        dayCell.className = 'day-cell';
        // ä»Šæ—¥é«˜äº®ï¼šä»…æ·»åŠ ç±»åï¼Œæ ·å¼ç”±CSSæ§åˆ¶ï¼Œæ— å°ºå¯¸å˜åŒ–
        if (year === todayYear && month === todayMonth && day === todayDate) {
          dayCell.classList.add('today');
        }

        const dateSpan = document.createElement('span');
        dateSpan.className = 'date';
        dateSpan.textContent = day;

        const shiftSpan = document.createElement('span');
        shiftSpan.className = `shift ${shiftInfo.class}`;
        shiftSpan.textContent = shiftInfo.name;
        shiftSpan.title = shiftInfo.time;

        dayCell.appendChild(dateSpan);
        dayCell.appendChild(shiftSpan);
        calendarGrid.appendChild(dayCell);
      }

      monthCard.appendChild(calendarGrid);
      calendarContainer.appendChild(monthCard);

      document.getElementById('current-month-display').textContent = `${year}å¹´${monthNames[month]}`;
    }

    function switchMonth(isNext) {
      if (isNext) {
        currentMonth += 1;
        if (currentMonth > 11) {
          currentMonth = 0;
          currentYear += 1;
        }
      } else {
        currentMonth -= 1;
        if (currentMonth < 0) {
          currentMonth = 11;
          currentYear -= 1;
        }
      }
      generateMonthCalendar(currentYear, currentMonth);
    }

    function initSwipeEvent() {
      let startX = 0;
      const calendarContainer = document.getElementById('calendar-container');
      calendarContainer.style.touchAction = 'pan-y';

      calendarContainer.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
      }, { passive: true });

      calendarContainer.addEventListener('touchend', (e) => {
        const endX = e.changedTouches[0].clientX;
        const diffX = endX - startX;
        if (Math.abs(diffX) > 40) {
          switchMonth(diffX < 0);
        }
      }, { passive: true });
    }

    window.onload = function () {
      renderTodayShift();
      generateMonthCalendar(currentYear, currentMonth);
      initSwipeEvent();
      document.getElementById('prev-month-btn').addEventListener('click', () => switchMonth(false));
      document.getElementById('next-month-btn').addEventListener('click', () => switchMonth(true));
      document.addEventListener('touchstart', () => { }, { passive: true });
    };
  </script>
</body>

</html>
