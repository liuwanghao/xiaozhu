<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>2026å¹´ç­åˆ¶æ—¥å†</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
    }

    body {
      background-color: #f5f5f5;
      padding: 10px;
    }

    .container {
      max-width: 750px;
      margin: 0 auto;
    }

    /* æ–°å¢ï¼šä»Šæ—¥ç­åˆ¶æ ·å¼ */
    .today-shift {
      background-color: #fff;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 15px;
      text-align: center;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .today-shift h2 {
      font-size: 18px;
      color: #333;
      margin-bottom: 5px;
    }

    .today-shift .shift-value {
      font-size: 20px;
      font-weight: bold;
      color: #4299e1;
    }

    .header {
      text-align: center;
      padding: 15px 0;
      color: #333;
    }

    .header h1 {
      font-size: 24px;
      margin-bottom: 5px;
    }

    .header .desc {
      font-size: 15px;
      color: #666;
    }

    /* æ–°å¢ï¼šæœˆä»½åˆ‡æ¢å®¹å™¨ */
    .month-switch {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
      background-color: #fff;
      padding: 10px 15px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .switch-btn {
      background-color: #f8f8f8;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 18px;
      color: #666;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .switch-btn:active {
      background-color: #eee;
    }

    .current-month-text {
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }

    /* æœˆä»½å®¹å™¨ */
    .month-card {
      background-color: #fff;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 15px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .month-title {
      font-size: 20px;
      font-weight: bold;
      color: #222;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid #eee;
    }

    /* æ—¥å†ç½‘æ ¼ */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
    }

    /* æ˜ŸæœŸè¡¨å¤´ */
    .week-header {
      text-align: center;
      font-size: 14px;
      color: #999;
      padding: 10px 0;
      background-color: #f8f8f8;
      border-radius: 4px;
      font-weight: bold;
    }

    /* æ—¥æœŸå•å…ƒæ ¼ */
    .day-cell {
      aspect-ratio: 1/1.1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      padding: 4px;
      position: relative;
    }

    /* ä»Šæ—¥æ—¥æœŸé«˜äº® */
    .day-cell.today {
      background-color: #f0f8ff;
      border: 2px solid #4299e1;
    }

    /* ç©ºå•å…ƒæ ¼ */
    .day-cell.empty {
      background-color: #f8f8f8;
      color: transparent;
    }

    /* æ—¥æœŸå’Œç­æ¬¡ */
    .day-cell .date {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 3px;
    }

    .day-cell .shift {
      font-size: 12px;
      padding: 3px 6px;
      border-radius: 4px;
      color: #fff;
      white-space: nowrap;
    }

    /* ç­æ¬¡é¢œè‰² */
    .shift-white {
      background-color: #4299e1;
    }

    .shift-night {
      background-color: #718096;
    }

    .shift-rest {
      background-color: #48bb78;
    }

    /* åº•éƒ¨è¯´æ˜ */
    .footer {
      margin-top: 20px;
      padding: 12px;
      background-color: #fff;
      border-radius: 8px;
      font-size: 14px;
      color: #666;
      line-height: 1.6;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- æ–°å¢ï¼šä»Šæ—¥ç­åˆ¶å±•ç¤º -->
    <div class="today-shift">
      <h2>å°çŒªä»Šæ—¥ç­åˆ¶æ˜¯ï¼š<span id="today-shift-value" class="shift-value"></span></h2>
    </div>

    <div class="header">
      <!-- <h1>2026å¹´ç­åˆ¶æ—¥å†</h1> -->
      <p class="desc">è½®ç­è§„åˆ™ï¼šå¤œç­â†’ä¼‘æ¯â†’ç™½ç­ï¼ˆ3å¤©å¾ªç¯ï¼‰ | åŸºå‡†æ—¥ï¼š2026-02-02 å¤œç­</p>
      <p>ğŸ”¹ ç™½ç­ï¼š8:00 - 20:00 | ğŸ”¹ å¤œç­ï¼š20:00 - æ¬¡æ—¥8:00 | ğŸ”¹ ä¼‘æ¯ï¼šæ— å·¥ä½œæ—¶é—´</p>
    </div>

    <!-- æ–°å¢ï¼šæœˆä»½åˆ‡æ¢æŒ‰é’® -->
    <div class="month-switch">
      <button class="switch-btn" id="prev-month-btn">â†</button>
      <div class="current-month-text" id="current-month-display">2026å¹´äºŒæœˆ</div>
      <button class="switch-btn" id="next-month-btn">â†’</button>
    </div>

    <!-- æ—¥å†å®¹å™¨ï¼ˆä»…æ˜¾ç¤ºå½“æœˆï¼‰ -->
    <div id="calendar-container"></div>
  </div>

  <script>
    // å…¨å±€å˜é‡ï¼šå½“å‰æ˜¾ç¤ºçš„å¹´/æœˆ
    let currentYear = 2026;
    let currentMonth = new Date().getMonth(); // é»˜è®¤å½“å‰æœˆï¼ˆ0=1æœˆï¼Œ1=2æœˆ...ï¼‰
    // å¼ºåˆ¶é»˜è®¤æ˜¾ç¤º2026å¹´ï¼ˆè‹¥å½“å‰ç³»ç»Ÿæ—¶é—´ä¸æ˜¯2026ï¼Œä»æ˜¾ç¤º2026ï¼‰
    currentYear = 2026;

    // 1. è·å–æŒ‡å®šæ—¥æœŸçš„ç­æ¬¡ä¿¡æ¯
    function getShiftInfo(date) {
      const baseDate = new Date(2026, 1, 2); // åŸºå‡†æ—¥ï¼š2026-02-02ï¼ˆ1=2æœˆï¼‰
      const timeDiff = date - baseDate;
      const daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
      const shiftCycle = [
        { name: 'å¤œç­', class: 'shift-night', time: '20:00-æ¬¡æ—¥8:00' },
        { name: 'ä¼‘æ¯', class: 'shift-rest', time: 'æ— å·¥ä½œæ—¶é—´' },
        { name: 'ç™½ç­', class: 'shift-white', time: '8:00-20:00' }
      ];
      const shiftIndex = (daysDiff % 3 + 3) % 3; // å¤„ç†è´Ÿæ•°
      return shiftCycle[shiftIndex];
    }

    // 2. æ¸²æŸ“ä»Šæ—¥ç­åˆ¶
    function renderTodayShift() {
      const today = new Date();
      today.setFullYear(2026); // å¼ºåˆ¶æ˜¾ç¤º2026å¹´çš„ä»Šæ—¥ç­æ¬¡ï¼ˆè‹¥ç³»ç»Ÿæ—¶é—´ä¸æ˜¯2026ï¼‰
      const shiftInfo = getShiftInfo(today);
      document.getElementById('today-shift-value').textContent = shiftInfo.name;
      // åŒ¹é…ç­æ¬¡é¢œè‰²
      document.getElementById('today-shift-value').style.color =
        shiftInfo.class === 'shift-white' ? '#4299e1' :
          shiftInfo.class === 'shift-night' ? '#718096' : '#48bb78';
    }

    // 3. ç”ŸæˆæŒ‡å®šæœˆä»½çš„æ—¥å†ï¼ˆæ ¸å¿ƒï¼šä»…ç”Ÿæˆå½“æœˆï¼‰
    function generateMonthCalendar(year, month) {
      const monthNames = ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ'];
      const weekNames = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];
      const today = new Date();
      today.setFullYear(2026); // å¼ºåˆ¶2026å¹´
      const todayDate = today.getDate();
      const todayMonth = today.getMonth();
      const todayYear = today.getFullYear();

      // æ¸…ç©ºåŸæœ‰æ—¥å†
      const calendarContainer = document.getElementById('calendar-container');
      calendarContainer.innerHTML = '';

      // åˆ›å»ºæœˆä»½å¡ç‰‡
      const monthCard = document.createElement('div');
      monthCard.className = 'month-card';

      // æœˆä»½æ ‡é¢˜
      const monthTitle = document.createElement('div');
      monthTitle.className = 'month-title';
      monthTitle.textContent = `${year}å¹´${monthNames[month]}`;
      monthCard.appendChild(monthTitle);

      // æ—¥å†ç½‘æ ¼
      const calendarGrid = document.createElement('div');
      calendarGrid.className = 'calendar-grid';

      // æ˜ŸæœŸè¡¨å¤´
      weekNames.forEach(week => {
        const weekHeader = document.createElement('div');
        weekHeader.className = 'week-header';
        weekHeader.textContent = week;
        calendarGrid.appendChild(weekHeader);
      });

      // è·å–å½“æœˆç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const firstDayWeek = (firstDay.getDay() === 0) ? 6 : firstDay.getDay() - 1;

      // å¡«å……æœˆåˆç©ºå•å…ƒæ ¼
      for (let i = 0; i < firstDayWeek; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.className = 'day-cell empty';
        calendarGrid.appendChild(emptyCell);
      }

      // å¡«å……æ—¥æœŸå•å…ƒæ ¼
      for (let day = 1; day <= lastDay.getDate(); day++) {
        const currentDate = new Date(year, month, day);
        const shiftInfo = getShiftInfo(currentDate);

        const dayCell = document.createElement('div');
        dayCell.className = 'day-cell';
        // é«˜äº®ä»Šæ—¥æ—¥æœŸ
        if (year === todayYear && month === todayMonth && day === todayDate) {
          dayCell.classList.add('today');
        }

        const dateSpan = document.createElement('span');
        dateSpan.className = 'date';
        dateSpan.textContent = day;

        const shiftSpan = document.createElement('span');
        shiftSpan.className = `shift ${shiftInfo.class}`;
        shiftSpan.textContent = shiftInfo.name;
        shiftSpan.title = shiftInfo.time;

        dayCell.appendChild(dateSpan);
        dayCell.appendChild(shiftSpan);
        calendarGrid.appendChild(dayCell);
      }

      monthCard.appendChild(calendarGrid);
      calendarContainer.appendChild(monthCard);

      // æ›´æ–°é¡¶éƒ¨æœˆä»½æ˜¾ç¤º
      document.getElementById('current-month-display').textContent = `${year}å¹´${monthNames[month]}`;
    }

    // 4. æœˆä»½åˆ‡æ¢é€»è¾‘
    function switchMonth(isNext) {
      if (isNext) {
        currentMonth += 1;
        if (currentMonth > 11) {
          currentMonth = 0;
          currentYear += 1;
        }
      } else {
        currentMonth -= 1;
        if (currentMonth < 0) {
          currentMonth = 11;
          currentYear -= 1;
        }
      }
      generateMonthCalendar(currentYear, currentMonth);
    }

    // 5. æ»‘åŠ¨æ‰‹åŠ¿å¤„ç†ï¼ˆå·¦å³æ»‘åˆ‡æ¢æœˆä»½ï¼‰
    function initSwipeEvent() {
      let startX = 0;
      const calendarContainer = document.getElementById('calendar-container');

      calendarContainer.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
      });

      calendarContainer.addEventListener('touchend', (e) => {
        const endX = e.changedTouches[0].clientX;
        const diffX = endX - startX;
        // æ»‘åŠ¨è·ç¦»è¶…è¿‡50pxæ‰è§¦å‘åˆ‡æ¢
        if (Math.abs(diffX) > 50) {
          if (diffX > 0) {
            // å³æ»‘ â†’ ä¸Šä¸€æœˆ
            switchMonth(false);
          } else {
            // å·¦æ»‘ â†’ ä¸‹ä¸€æœˆ
            switchMonth(true);
          }
        }
      });
    }

    // é¡µé¢åŠ è½½åˆå§‹åŒ–
    window.onload = function () {
      // æ¸²æŸ“ä»Šæ—¥ç­åˆ¶
      renderTodayShift();
      // åˆå§‹åŒ–æ˜¾ç¤ºå½“æœˆæ—¥å†
      generateMonthCalendar(currentYear, currentMonth);
      // åˆå§‹åŒ–æ»‘åŠ¨äº‹ä»¶
      initSwipeEvent();
      // ç»‘å®šåˆ‡æ¢æŒ‰é’®äº‹ä»¶
      document.getElementById('prev-month-btn').addEventListener('click', () => switchMonth(false));
      document.getElementById('next-month-btn').addEventListener('click', () => switchMonth(true));
    };
  </script>
</body>

</html>
